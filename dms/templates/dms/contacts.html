<!-- 
    Code Source: https://github.com/CoreyMSchafer/code_snippets/tree/master/Django_Blog
    Code Author: Corey Schafer
-->

{% extends "workhuntr/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<div class="content-section" style="background-color: #8fbdc7; width: 120%">
    <div class="media">
        <div class="media-body">
            <h2 class="account-heading">Messages</h2>
            <form method="POST">
            {% csrf_token %}
                <input type="text" placeholder="Search Users" name="search" style="background-color: #e3d6ab;">
                <button class="btn btn-outline-info" type="submit" style="background-color: #e3d6ab;">Submit</button>
            </form>
            {% if contacts_messages %}
            {% for contact, message in contacts_messages.items %}
            {% if contact %}
            <hr class="rounded">
                <p class="text-secondary" style="text-align:right;"><a  style="background-color: #e3d6ab;" class="btn btn-outline-info" href="{% url 'info' username=contact.username %}">Delete</a></p>
                <img class="rounded-circle" width="50" height="50" src="{{ contact.profile.profile_picture.url }}"><a class="ml-2" href="{% url 'conversation' username=contact.username %}">{{ contact }}</a>
                <p class="text-secondary">{{ message.content }}</p>
            </h5>
            {% endif %}
            {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}